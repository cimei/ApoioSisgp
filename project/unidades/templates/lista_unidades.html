{% extends "base.html" %}
{% block content %}
<div class="jumbotron">
  
  <h5>Lista das Unidades</h5>

  <div class = "row">
    <div class="col-1">
      <a href="{{url_for('unidades.cria_unidade')}}" class="btn btn-primary active" role="button" aria-pressed="true">Inserir nova</a>
    </div>
    <div class="col">
      <small class="form-text text-muted"> Ou clique em um número de sequência para ver e atualizar dados da unidade.</small>
    </div>
  </div>
  <br>

<caption>
  <div class="row">
      <div class="col">
        <p>Lista das <span class="badge badge-pill badge-primary">{{quantidade}}</span> unidades da Instituição</p>
      </div>
  </div>
</caption>

<div style="overflow-y:auto ; height:450px">
  <table class="table table-striped table-hover table-sm">
    <caption>Unidades da Instituição</caption>
    <thead>
      <tr>
        <th scope="col"><p align = "center">#</p></th>
        <th scope="col"><p align = "center">Sigla</p></th>
        <th scope="col"><p align = "center">Descrição</p></th>
        <th scope="col"><p align = "center">Pai</p></th>
        <th scope="col"><p class = "text-muted" align = "center">Tipo</p></th>
        <th scope="col"><p align = "center">Situação</p></th>
        <th scope="col"><p align = "center">UF</p></th>
        <th scope="col"><p align = "center">Nível</p></th>
        <th scope="col"><p class = "text-muted" align = "center">TipoFunc</p></th>
        <th scope="col"><p align = "center">E-mail</p></th>
        <th scope="col"><p align = "center">SIORG</p></th>
        <th scope="col"><p align = "center">Chefe</p></th>
        <th scope="col"><p align = "center">Substituto</p></th>
      </tr>
    </thead>
    <tbody>
      {% for unid in unids %}

      <tr>
        <th scope="row"><abbr title="Acrescentar dados à Unidade.">
          <p align = "center"><a href="{{url_for('unidades.unidade_update', cod_unid=unid.unidadeId)}}"> {{unids.index(unid) + 1}} </a>
        </p></th>
        <td><p align = "center"> {{unid.undSigla}} </p></td>
        <td><p align = "center"> {{unid.undDescricao}} </p></td>
        <td><p align = "center"> {{unid.Sigla_Pai}} </p></td>
        <td><p class = "text-muted" align = "center"> {{lista_tipo_unidade[unid.tipoUnidadeId-1][1]}} </p></td>
        <td><p align = "center"> {{lista_situ_unidade[unid.situacaoUnidadeId-1][1]}} </p></td>
        <td><p align = "center"> {{unid.ufId}} </p></td>
        <td><p align = "center"> {% if unid.undNivel == None %}N.I.{% else %}{{unid.undNivel}}{% endif %} </p></td>
        <td><p class = "text-muted" align = "center"> {% if unid.tipoFuncaoUnidadeId == None %}N.I.{% else %}{{unid.tipoFuncaoUnidadeId}}{% endif %} </p></td>
        <td><p align = "center"> {% if unid.Email == None or unid.Email == '' %}N.I.{% else %}{{unid.Email}}{% endif %} </p></td>
        <td><p align = "center"> {% if unid.undCodigoSIORG == 0 %}N.I.{% else %}{{unid.undCodigoSIORG}}{% endif %} </p></td>
        <td><p align = "center"> {% if unid.pessoaIdChefe == None %}N.I.{% else %}{{unid.Chefe}}{% endif %} </p></td>
        <td><p align = "center"> {% if unid.pessoaIdChefeSubstituto == None %}N.I.{% else %}{{unid.Subs}}{% endif %} </p></td>
      </tr>

      {% endfor %}

    </tbody>
  </table>

</div>

</div>
{% endblock %}
